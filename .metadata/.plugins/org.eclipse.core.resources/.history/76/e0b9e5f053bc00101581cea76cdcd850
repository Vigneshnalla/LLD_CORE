package main.java.com.vignesh.librarymanagement;

import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;
import java.util.List;

import main.java.com.vignesh.librarymanagement.enums.AccountStatus;
import main.java.com.vignesh.librarymanagement.enums.BookFormat;
import main.java.com.vignesh.librarymanagement.enums.BookStatus;
import main.java.com.vignesh.librarymanagement.model.book.Author;
import main.java.com.vignesh.librarymanagement.model.book.BookItem;
import main.java.com.vignesh.librarymanagement.model.book.Rack;
import main.java.com.vignesh.librarymanagement.model.people.Address;
import main.java.com.vignesh.librarymanagement.model.people.Librarian;
import main.java.com.vignesh.librarymanagement.model.people.LibraryCard;
import main.java.com.vignesh.librarymanagement.model.people.Member;
import main.java.com.vignesh.librarymanagement.model.people.Person;

public class LibraryManagementSystemTest {

	public static void main(String[] args) {
		LibraryManagementSystem libraryManagementSystem = LibraryManagementSystem.getInstance();

		Address address = new Address();
		address.setStreetNo("5-106");
		address.setCity("KUKATPALLY");
		address.setState("TELANGANA");
		address.setCountry("INDIA");
		address.setZipCode("500001");

		libraryManagementSystem.setAddress(address);

		Librarian librarian = new Librarian(libraryManagementSystem);

		// Librarian Address
		Address libAddress = new Address();
		libAddress.setStreetNo("9-222");
		libAddress.setCity("Thoraipakkam");
		libAddress.setState("Chennai");
		libAddress.setCountry("India");
		libAddress.setZipCode("600097");

		// Librarian Person Details
		Person p = new Person();
		p.setAddress(libAddress);

		p.setEmail("bob999@gmail.com");
		p.setName("Bob Frage");
		p.setPhoneNo("9876543210");

		// Create Library Card
		LibraryCard card = new LibraryCard();
		card.setCardNo("CARD-001");
		card.setBarcode("BAR-001");
		card.setActive(true);
		card.setIssuedAt(new Date());

		librarian.setId("L001");
		librarian.setPassword("securePassword@123");
		librarian.setJoiningDate(new Date());
		librarian.setPerson(p);
		librarian.setAccountStatus(AccountStatus.ACTIVE);
		librarian.setLibraryCard(card);

		Calendar cal = Calendar.getInstance();
		cal.add(Calendar.YEAR, 1); // valid for 1 year
		card.setExpiryDate(cal.getTime());

		List<BookItem> books = createBookItems();

		libraryManagementSystem.addLibrarian(librarian);

		for (BookItem book : books)
			librarian.addBookItem(book);

		System.out.println(libraryManagementSystem);

	}


    public static List<Member> createMembers(LibraryManagementSystem librarySystem) {
        List<Member> members = new ArrayList<>();

        // Utility dates
        Date issuedAt = new Date();

        // Member 1
        Member m1 = new Member(librarySystem);
        m1.setId("M001");
        m1.setPassword("pass123");
        m1.setPerson(new Person("Ravi Kumar", "ravi.kumar@example.com", "9876543210",
                new Address("12 MG Road", "Bangalore", "Karnataka", "India", "560001")));
        m1.setAccountStatus(AccountStatus.ACTIVE);
        m1.setLibraryCard(new LibraryCard("LC001", "BAR001", true, issuedAt, addYear(1)));
        m1.setTotalBooksCheckedOut(2);
        members.add(m1);

        // Member 2
        Member m2 = new Member(librarySystem);
        m2.setId("M002");
        m2.setPassword("pwd456");
        m2.setPerson(new Person("Priya Sharma", "priya.sharma@example.com", "9123456780",
                new Address("45 Green Park", "Delhi", "Delhi", "India", "110016")));
        m2.setAccountStatus(AccountStatus.ACTIVE);
        m2.setLibraryCard(new LibraryCard("LC002", "BAR002", true, issuedAt, addYear(1)));
        m2.setTotalBooksCheckedOut(0);
        members.add(m2);

        // Member 3
        Member m3 = new Member(librarySystem);
        m3.setId("M003");
        m3.setPassword("secure789");
        m3.setPerson(new Person("Karan Mehta", "karan.mehta@example.com", "9988776655",
                new Address("21 Nehru Street", "Chennai", "Tamil Nadu", "India", "600018")));
        m3.setAccountStatus(AccountStatus.BLOCKED);
        m3.setLibraryCard(new LibraryCard("LC003", "BAR003", false, issuedAt, addYear(1)));
        m3.setTotalBooksCheckedOut(1);
        members.add(m3);

        // Member 4
        Member m4 = new Member(librarySystem);
        m4.setId("M004");
        m4.setPassword("abc123");
        m4.setPerson(new Person("Deepa Iyer", "deepa.iyer@example.com", "9012345678",
                new Address("8 Anna Nagar", "Madurai", "Tamil Nadu", "India", "625020")));
        m4.setAccountStatus(AccountStatus.ACTIVE);
        m4.setLibraryCard(new LibraryCard("LC004", "BAR004", true, issuedAt, addYear(1)));
        m4.setTotalBooksCheckedOut(3);
        members.add(m4);

        // Member 5
        Member m5 = new Member(librarySystem);
        m5.setId("M005");
        m5.setPassword("xyz789");
        m5.setPerson(new Person("Vivek Nair", "vivek.nair@example.com", "9823456712",
                new Address("34 Marine Drive", "Mumbai", "Maharashtra", "India", "400002")));
        m5.setAccountStatus(AccountStatus.CLOSED);
        m5.setLibraryCard(new LibraryCard("LC005", "BAR005", false, issuedAt, addYear(1)));
        m5.setTotalBooksCheckedOut(0);
        members.add(m5);

        // Member 6
        Member m6 = new Member(librarySystem);
        m6.setId("M006");
        m6.setPassword("pass007");
        m6.setPerson(new Person("Sneha Das", "sneha.das@example.com", "9845123456",
                new Address("67 Lake View", "Kolkata", "West Bengal", "India", "700045")));
        m6.setAccountStatus(AccountStatus.ACTIVE);
        m6.setLibraryCard(new LibraryCard("LC006", "BAR006", true, issuedAt, addYear(1)));
        m6.setTotalBooksCheckedOut(4);
        members.add(m6);

        // Member 7
        Member m7 = new Member(librarySystem);
        m7.setId("M007");
        m7.setPassword("mypass");
        m7.setPerson(new Person("Rohan Verma", "rohan.verma@example.com", "9753124680",
                new Address("101 JP Nagar", "Bangalore", "Karnataka", "India", "560076")));
        m7.setAccountStatus(AccountStatus.ACTIVE);
        m7.setLibraryCard(new LibraryCard("LC007", "BAR007", true, issuedAt, addYear(1)));
        m7.setTotalBooksCheckedOut(1);
        members.add(m7);

        // Member 8
        Member m8 = new Member(librarySystem);
        m8.setId("M008");
        m8.setPassword("booklover");
        m8.setPerson(new Person("Meera Nanda", "meera.nanda@example.com", "9623456789",
                new Address("9 Sector 22", "Chandigarh", "Chandigarh", "India", "160022")));
        m8.setAccountStatus(AccountStatus.ACTIVE);
        m8.setLibraryCard(new LibraryCard("LC008", "BAR008", true, issuedAt, addYear(1)));
        m8.setTotalBooksCheckedOut(0);
        members.add(m8);

        // Member 9
        Member m9 = new Member(librarySystem);
        m9.setId("M009");
        m9.setPassword("qwerty");
        m9.setPerson(new Person("Amit Patel", "amit.patel@example.com", "9876501234",
                new Address("22 CG Road", "Ahmedabad", "Gujarat", "India", "380009")));
        m9.setAccountStatus(AccountStatus.BLOCKED);
        m9.setLibraryCard(new LibraryCard("LC009", "BAR009", false, issuedAt, addYear(1)));
        m9.setTotalBooksCheckedOut(2);
        members.add(m9);

        // Member 10
        Member m10 = new Member(librarySystem);
        m10.setId("M010");
        m10.setPassword("lib123");
        m10.setPerson(new Person("Divya Rao", "divya.rao@example.com", "9123409876",
                new Address("77 Station Road", "Pune", "Maharashtra", "India", "411001")));
        m10.setAccountStatus(AccountStatus.ACTIVE);
        m10.setLibraryCard(new LibraryCard("LC010", "BAR010", true, issuedAt, addYear(1)));
        m10.setTotalBooksCheckedOut(5);
        members.add(m10);

        return members;
    }

    // Utility function to add one year for expiry date
    private static Date addYear(int years) {
        Calendar cal = Calendar.getInstance();
        cal.add(Calendar.YEAR, years);
        return cal.getTime();
    }
}

	public static List<Member> createMembers(LibraryManagementSystem librarySystem) {
		List<Member> members = new ArrayList<>();
		Member m1 = new Member(librarySystem);
        m1.setId("M001");
        m1.setPassword("pass123");
        m1.setPerson(new Person("Ravi Kumar", "ravi.kumar@example.com", "9876543210",
                new Address("12 MG Road", "Bangalore", "Karnataka","India", "560001")));
        m1.setAccountStatus(AccountStatus.ACTIVE);
        m1.setLibraryCard(new LibraryCard("LC001", new Date(), addYear(1)));
        m1.setTotalBooksCheckedOut(2);
        members.add(m1);

        // Member 2
        Member m2 = new Member(librarySystem);
        m2.setId("M002");
        m2.setPassword("pwd456");
        m2.setPerson(new Person("Priya Sharma", "priya.sharma@example.com", "9123456780",
                new Address("45 Green Park", "Delhi", "Delhi","India", "110016")));
        m2.setAccountStatus(AccountStatus.ACTIVE);
        m2.setLibraryCard(new LibraryCard("LC002", new Date(), addYear(1)));
        m2.setTotalBooksCheckedOut(0);
        members.add(m2);

        // Member 3
        Member m3 = new Member(librarySystem);
        m3.setId("M003");
        m3.setPassword("secure789");
        m3.setPerson(new Person("Karan Mehta", "karan.mehta@example.com", "9988776655",
                new Address("21 Nehru Street", "Chennai", "Tamil Nadu","India", "600018")));
        m3.setAccountStatus(AccountStatus.BLOCKED);
        m3.setLibraryCard(new LibraryCard("LC003", new Date(), addYear(1)));
        m3.setTotalBooksCheckedOut(1);
        members.add(m3);

        // Member 4
        Member m4 = new Member(librarySystem);
        m4.setId("M004");
        m4.setPassword("abc123");
        m4.setPerson(new Person("Deepa Iyer", "deepa.iyer@example.com", "9012345678",
                new Address("8 Anna Nagar", "Madurai", "Tamil Nadu","india", "625020")));
        m4.setAccountStatus(AccountStatus.ACTIVE);
        m4.setLibraryCard(new LibraryCard("LC004", new Date(), addYear(1)));
        m4.setTotalBooksCheckedOut(3);
        members.add(m4);

        // Member 5
        Member m5 = new Member(librarySystem);
        m5.setId("M005");
        m5.setPassword("xyz789");
        m5.setPerson(new Person("Vivek Nair", "vivek.nair@example.com", "9823456712",
                new Address("34 Marine Drive", "Mumbai", "Maharashtra","India",  "400002")));
        m5.setAccountStatus(AccountStatus.CLOSED);
        m5.setLibraryCard(new LibraryCard("LC005", new Date(), addYear(1)));
        m5.setTotalBooksCheckedOut(0);
        members.add(m5);

        // Member 6
        Member m6 = new Member(librarySystem);
        m6.setId("M006");
        m6.setPassword("pass007");
        m6.setPerson(new Person("Sneha Das", "sneha.das@example.com", "9845123456",
                new Address("67 Lake View", "Kolkata", "West Bengal", "India", "700045")));
        m6.setAccountStatus(AccountStatus.ACTIVE);
        m6.setLibraryCard(new LibraryCard("LC006", new Date(), addYear(1)));
        m6.setTotalBooksCheckedOut(4);
        members.add(m6);

        // Member 7
        Member m7 = new Member(librarySystem);
        m7.setId("M007");
        m7.setPassword("mypass");
        m7.setPerson(new Person("Rohan Verma", "rohan.verma@example.com", "9753124680",
                new Address("101 JP Nagar", "Bangalore", "Karnataka","India",  "560076")));
        m7.setAccountStatus(AccountStatus.ACTIVE);
        m7.setLibraryCard(new LibraryCard("LC007", new Date(), addYear(1)));
        m7.setTotalBooksCheckedOut(1);
        members.add(m7);

        // Member 8
        Member m8 = new Member(librarySystem);
        m8.setId("M008");
        m8.setPassword("booklover");
        m8.setPerson(new Person("Meera Nanda", "meera.nanda@example.com", "9623456789",
                new Address("9 Sector 22", "Chandigarh", "Chandigarh","India",  "160022")));
        m8.setAccountStatus(AccountStatus.ACTIVE);
        m8.setLibraryCard(new LibraryCard("LC008", new Date(), addYear(1)));
        m8.setTotalBooksCheckedOut(0);
        members.add(m8);

        // Member 9
        Member m9 = new Member(librarySystem);
        m9.setId("M009");
        m9.setPassword("qwerty");
        m9.setPerson(new Person("Amit Patel", "amit.patel@example.com", "9876501234",
                new Address("22 CG Road", "Ahmedabad", "Gujarat", "India", "380009")));
        m9.setAccountStatus(AccountStatus.BLOCKED);
        m9.setLibraryCard(new LibraryCard("LC009", new Date(), addYear(1)));
        m9.setTotalBooksCheckedOut(2);
        members.add(m9);

        // Member 10
        Member m10 = new Member(librarySystem);
        m10.setId("M010");
        m10.setPassword("lib123");
        m10.setPerson(new Person("Divya Rao", "divya.rao@example.com", "9123409876",
                new Address("77 Station Road", "Pune", "Maharashtra","India",  "411001")));
        m10.setAccountStatus(AccountStatus.ACTIVE);
        m10.setLibraryCard(new LibraryCard("LC010", new Date(), addYear(1)));
        m10.setTotalBooksCheckedOut(5);
        members.add(m10);

        return members;
    }

    private static Date addYear(int years) {
        Calendar cal = Calendar.getInstance();
        cal.add(Calendar.YEAR, years);
        return cal.getTime();
    }
}
