package main.java.com.vignesh.librarymanagement.model.people;

import java.util.Date;

import main.java.com.vignesh.librarymanagement.LibraryManagementSystem;
import main.java.com.vignesh.librarymanagement.model.book.BookItem;

public class Librarian extends Account {

    private Date joiningDate;
    private final LibraryManagementSystem librarySystem;

    // ---------- Constructor ----------
    public Librarian(LibraryManagementSystem librarySystem) {
        this.librarySystem = librarySystem;
    }

    public Date getJoiningDate() {
        return joiningDate;
    }

    public void setJoiningDate(Date joiningDate) {
        this.joiningDate = joiningDate;
    }

    // ---------- Core Librarian Responsibilities ----------

    /** Add a new book item to the library */
    public boolean addBookItem(BookItem bookItem) {
        if (bookItem == null) {
            System.out.println("❌ Cannot add null book item.");
            return false;
        }

        librarySystem.addBookItem(bookItem, this);
        System.out.println("✅ Book item added successfully: " + bookItem.getTitle());
        return true;
    }

    /** Remove an existing book item from the library */
    public boolean removeBookItem(BookItem bookItem) {
        if (bookItem == null) {
            System.out.println("❌ Cannot remove null book item.");
            return false;
        }
   
        librarySystem.removeBookItem(bookItem);
        System.out.println("✅ Book item removed successfully: " + bookItem.getTitle());
        return true;
    }

    /** Add a new library member (registration) */
    public boolean addMember(Member member) {
        if (member == null || member.getId() == null) {
            System.out.println("❌ Cannot add null or invalid member.");
            return false;
        }
        
        librarySystem.addMember(member, this);
        System.out.println("✅ Member added successfully: " + member.getId());
        return true;
    }

    /** Remove a library member */
    public boolean removeMember(String memberId) {
        if (memberId == null || memberId.isEmpty()) {
            System.out.println("❌ Invalid member ID.");
            return false;
        }
       
        librarySystem.removeMember(memberId, this);
        System.out.println("✅ Member removed successfully: " + memberId);
        return true;
    }

    /** Block a library member account */
    public boolean blockMember(String memberId) {

        if (memberId == null || memberId.isEmpty()) 
        return librarySystem.blockMember(memberId,this);
    }

    /** Unblock a library member account */
    public boolean unblockMember(String memberId) {
        if (memberId == null || memberId.isEmpty()) {
            System.out.println("❌ Librarian not authorized to unblock members.");
            return false;
        }
        return librarySystem.unblockMember(memberId, this);
    }

    // ---------- Helper ----------
    public LibraryManagementSystem getLibrarySystem() {
        return librarySystem;
    }

    @Override
    public String toString() {
        return super.toString() + 
               "\nLibrarian [joiningDate=" + joiningDate + "]";
    }
}
